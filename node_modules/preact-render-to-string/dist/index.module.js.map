{"version":3,"file":"index.module.js","sources":["../src/util.js","../src/index.js"],"sourcesContent":["// DOM properties that should NOT have \"px\" added when numeric\nexport const IS_NON_DIMENSIONAL = /acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i;\n\nexport let encodeEntities = s => String(s)\n\t.replace(/&/g, '&amp;')\n\t.replace(/</g, '&lt;')\n\t.replace(/>/g, '&gt;')\n\t.replace(/\"/g, '&quot;');\n\nexport let indent = (s, char) => String(s).replace(/(\\n+)/g, '$1' + (char || '\\t'));\n\nexport let isLargeString = (s, length, ignoreLines) => (String(s).length>(length || 40) || (!ignoreLines && String(s).indexOf('\\n')!==-1) || String(s).indexOf('<')!==-1);\n\nconst JS_TO_CSS = {};\n\n// Convert an Object style to a CSSText string\nexport function styleObjToCss(s) {\n\tlet str = '';\n\tfor (let prop in s) {\n\t\tlet val = s[prop];\n\t\tif (val!=null) {\n\t\t\tif (str) str += ' ';\n\t\t\t// str += jsToCss(prop);\n\t\t\tstr += prop[0]=='-' ? prop : (JS_TO_CSS[prop] || (JS_TO_CSS[prop] = prop.replace(/([A-Z])/g,'-$1').toLowerCase()));\n\t\t\tstr += ': ';\n\t\t\tstr += val;\n\t\t\tif (typeof val==='number' && IS_NON_DIMENSIONAL.test(prop)===false) {\n\t\t\t\tstr += 'px';\n\t\t\t}\n\t\t\tstr += ';';\n\t\t}\n\t}\n\treturn str || undefined;\n}\n\n/**\n * Copy all properties from `props` onto `obj`.\n * @param {object} obj Object onto which properties should be copied.\n * @param {object} props Object from which to copy properties.\n * @returns {object}\n * @private\n */\nexport function assign(obj, props) {\n\tfor (let i in props) obj[i] = props[i];\n\treturn obj;\n}\n\n/**\n * Get flattened children from the children prop\n * @param {Array} accumulator\n * @param {any} children A `props.children` opaque object.\n * @returns {Array} accumulator\n * @private\n */\nexport function getChildren(accumulator, children) {\n\tif (Array.isArray(children)) {\n\t\tchildren.reduce(getChildren, accumulator);\n\t}\n\telse if (children!=null && children!==false) {\n\t\taccumulator.push(children);\n\t}\n\treturn accumulator;\n}\n","import { encodeEntities, indent, isLargeString, styleObjToCss, assign, getChildren } from './util';\nimport { options, Fragment, createElement } from 'preact';\n\nconst SHALLOW = { shallow: true };\n\n// components without names, kept as a hash for later comparison to return consistent UnnamedComponentXX names.\nconst UNNAMED = [];\n\nconst VOID_ELEMENTS = /^(area|base|br|col|embed|hr|img|input|link|meta|param|source|track|wbr)$/;\n\nconst noop = () => {};\n\n\n/** Render Preact JSX + Components to an HTML string.\n *\t@name render\n *\t@function\n *\t@param {VNode} vnode\tJSX VNode to render.\n *\t@param {Object} [context={}]\tOptionally pass an initial context object through the render path.\n *\t@param {Object} [options={}]\tRendering options\n *\t@param {Boolean} [options.shallow=false]\tIf `true`, renders nested Components as HTML elements (`<Foo a=\"b\" />`).\n *\t@param {Boolean} [options.xml=false]\t\tIf `true`, uses self-closing tags for elements without children.\n *\t@param {Boolean} [options.pretty=false]\t\tIf `true`, adds whitespace for readability\n *\t@param {RegEx|undefined} [options.voidElements]       RegeEx that matches elements that are considered void (self-closing)\n */\nrenderToString.render = renderToString;\n\n\n/** Only render elements, leaving Components inline as `<ComponentName ... />`.\n *\tThis method is just a convenience alias for `render(vnode, context, { shallow:true })`\n *\t@name shallow\n *\t@function\n *\t@param {VNode} vnode\tJSX VNode to render.\n *\t@param {Object} [context={}]\tOptionally pass an initial context object through the render path.\n */\nlet shallowRender = (vnode, context) => renderToString(vnode, context, SHALLOW);\n\n\n/** The default export is an alias of `render()`. */\nfunction renderToString(vnode, context, opts, inner, isSvgMode, selectValue) {\n\tif (vnode==null || typeof vnode==='boolean') {\n\t\treturn '';\n\t}\n\n\t// wrap array nodes in Fragment\n\tif (Array.isArray(vnode)) {\n\t\tvnode = createElement(Fragment, null, vnode);\n\t}\n\n\tlet nodeName = vnode.type,\n\t\tprops = vnode.props,\n\t\tisComponent = false;\n\tcontext = context || {};\n\topts = opts || {};\n\n\tlet pretty = opts.pretty,\n\t\tindentChar = pretty && typeof pretty==='string' ? pretty : '\\t';\n\n\t// #text nodes\n\tif (typeof vnode!=='object' && !nodeName) {\n\t\treturn encodeEntities(vnode);\n\t}\n\n\t// components\n\tif (typeof nodeName==='function') {\n\t\tisComponent = true;\n\t\tif (opts.shallow && (inner || opts.renderRootComponent===false)) {\n\t\t\tnodeName = getComponentName(nodeName);\n\t\t}\n\t\telse if (nodeName===Fragment) {\n\t\t\tlet rendered = '';\n\t\t\tlet children = [];\n\t\t\tgetChildren(children, vnode.props.children);\n\n\t\t\tfor (let i = 0; i < children.length; i++) {\n\t\t\t\trendered += (i > 0 && pretty ? '\\n' : '') + renderToString(children[i], context, opts, opts.shallowHighOrder!==false, isSvgMode, selectValue);\n\t\t\t}\n\t\t\treturn rendered;\n\t\t}\n\t\telse {\n\t\t\tlet rendered;\n\n\t\t\tlet c = vnode.__c = {\n\t\t\t\t__v: vnode,\n\t\t\t\tcontext,\n\t\t\t\tprops: vnode.props,\n\t\t\t\t// silently drop state updates\n\t\t\t\tsetState: noop,\n\t\t\t\tforceUpdate: noop,\n\t\t\t\t// hooks\n\t\t\t\t__h: []\n\t\t\t};\n\n\t\t\t// options.render\n\t\t\tif (options.__r) options.__r(vnode);\n\n\t\t\tif (!nodeName.prototype || typeof nodeName.prototype.render!=='function') {\n\t\t\t\t// Necessary for createContext api. Setting this property will pass\n\t\t\t\t// the context value as `this.context` just for this component.\n\t\t\t\tlet cxType = nodeName.contextType;\n\t\t\t\tlet provider = cxType && context[cxType.__c];\n\t\t\t\tlet cctx = cxType != null ? (provider ? provider.props.value : cxType.__) : context;\n\n\t\t\t\t// stateless functional components\n\t\t\t\trendered = nodeName.call(vnode.__c, props, cctx);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// class-based components\n\t\t\t\tlet cxType = nodeName.contextType;\n\t\t\t\tlet provider = cxType && context[cxType.__c];\n\t\t\t\tlet cctx = cxType != null ? (provider ? provider.props.value : cxType.__) : context;\n\n\t\t\t\t// c = new nodeName(props, context);\n\t\t\t\tc = vnode.__c = new nodeName(props, cctx);\n\t\t\t\tc.__v = vnode;\n\t\t\t\t// turn off stateful re-rendering:\n\t\t\t\tc._dirty = c.__d = true;\n\t\t\t\tc.props = props;\n\t\t\t\tif (c.state==null) c.state = {};\n\n\t\t\t\tif (c._nextState==null && c.__s==null) {\n\t\t\t\t\tc._nextState = c.__s = c.state;\n\t\t\t\t}\n\n\t\t\t\tc.context = cctx;\n\t\t\t\tif (nodeName.getDerivedStateFromProps) c.state = assign(assign({}, c.state), nodeName.getDerivedStateFromProps(c.props, c.state));\n\t\t\t\telse if (c.componentWillMount) {\n\t\t\t\t\tc.componentWillMount();\n\n\t\t\t\t\t// If the user called setState in cWM we need to flush pending,\n\t\t\t\t\t// state updates. This is the same behaviour in React.\n\t\t\t\t\tc.state = c._nextState !== c.state\n\t\t\t\t\t\t? c._nextState : c.__s!==c.state\n\t\t\t\t\t\t\t? c.__s : c.state;\n\t\t\t\t}\n\n\t\t\t\trendered = c.render(c.props, c.state, c.context);\n\t\t\t}\n\n\t\t\tif (c.getChildContext) {\n\t\t\t\tcontext = assign(assign({}, context), c.getChildContext());\n\t\t\t}\n\n\t\t\treturn renderToString(rendered, context, opts, opts.shallowHighOrder!==false, isSvgMode, selectValue);\n\t\t}\n\t}\n\n\t// render JSX to HTML\n\tlet s = '', propChildren, html;\n\n\tif (props) {\n\t\tlet attrs = Object.keys(props);\n\n\t\t// allow sorting lexicographically for more determinism (useful for tests, such as via preact-jsx-chai)\n\t\tif (opts && opts.sortAttributes===true) attrs.sort();\n\n\t\tfor (let i=0; i<attrs.length; i++) {\n\t\t\tlet name = attrs[i],\n\t\t\t\tv = props[name];\n\t\t\tif (name==='children') {\n\t\t\t\tpropChildren = v;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (name.match(/[\\s\\n\\\\/='\"\\0<>]/)) continue;\n\n\t\t\tif (!(opts && opts.allAttributes) && (name==='key' || name==='ref' || name==='__self' || name==='__source')) continue;\n\n\t\t\tif (name==='className') {\n\t\t\t\tif (props.class) continue;\n\t\t\t\tname = 'class';\n\t\t\t}\n\t\t\telse if (isSvgMode && name.match(/^xlink:?./)) {\n\t\t\t\tname = name.toLowerCase().replace(/^xlink:?/, 'xlink:');\n\t\t\t}\n\n\t\t\tif (name==='htmlFor') {\n\t\t\t\tif (props.for) continue;\n\t\t\t\tname = 'for';\n\t\t\t}\n\n\t\t\tif (name==='style' && v && typeof v==='object') {\n\t\t\t\tv = styleObjToCss(v);\n\t\t\t}\n\n\t\t\t// always use string values instead of booleans for aria attributes\n\t\t\t// also see https://github.com/preactjs/preact/pull/2347/files\n\t\t\tif (name[0] === 'a' && name['1'] === 'r' && typeof v === 'boolean') {\n\t\t\t\tv = String(v);\n\t\t\t}\n\n\t\t\tlet hooked = opts.attributeHook && opts.attributeHook(name, v, context, opts, isComponent);\n\t\t\tif (hooked || hooked==='') {\n\t\t\t\ts += hooked;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (name==='dangerouslySetInnerHTML') {\n\t\t\t\thtml = v && v.__html;\n\t\t\t}\n\t\t\telse if (nodeName === 'textarea' && name === 'value') {\n\t\t\t\t// <textarea value=\"a&b\"> --> <textarea>a&amp;b</textarea>\n\t\t\t\tpropChildren = v;\n\t\t\t}\n\t\t\telse if ((v || v===0 || v==='') && typeof v!=='function') {\n\t\t\t\tif (v===true || v==='') {\n\t\t\t\t\tv = name;\n\t\t\t\t\t// in non-xml mode, allow boolean attributes\n\t\t\t\t\tif (!opts || !opts.xml) {\n\t\t\t\t\t\ts += ' ' + name;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (name==='value') {\n\t\t\t\t\tif (nodeName==='select') {\n\t\t\t\t\t\tselectValue = v;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\telse if (nodeName==='option' && selectValue==v) {\n\t\t\t\t\t\ts += ` selected`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ts += ` ${name}=\"${encodeEntities(v)}\"`;\n\t\t\t}\n\t\t}\n\t}\n\n\t// account for >1 multiline attribute\n\tif (pretty) {\n\t\tlet sub = s.replace(/^\\n\\s*/, ' ');\n\t\tif (sub!==s && !~sub.indexOf('\\n')) s = sub;\n\t\telse if (pretty && ~s.indexOf('\\n')) s += '\\n';\n\t}\n\n\ts = `<${nodeName}${s}>`;\n\tif (String(nodeName).match(/[\\s\\n\\\\/='\"\\0<>]/)) throw new Error(`${nodeName} is not a valid HTML tag name in ${s}`);\n\n\tlet isVoid = String(nodeName).match(VOID_ELEMENTS) || (opts.voidElements && String(nodeName).match(opts.voidElements));\n\tif (isVoid) s = s.replace(/>$/, ' />');\n\n\tlet pieces = [];\n\n\tlet children;\n\tif (html) {\n\t\t// if multiline, indent.\n\t\tif (pretty && isLargeString(html)) {\n\t\t\thtml = '\\n' + indentChar + indent(html, indentChar);\n\t\t}\n\t\ts += html;\n\t}\n\telse if (propChildren != null && getChildren(children = [], propChildren).length) {\n\t\tlet hasLarge = pretty && ~s.indexOf('\\n');\n\t\tlet lastWasText = false;\n\n\t\tfor (let i=0; i<children.length; i++) {\n\t\t\tlet child = children[i];\n\n\t\t\tif (child!=null && child!==false) {\n\t\t\t\tlet childSvgMode = nodeName==='svg' ? true : nodeName==='foreignObject' ? false : isSvgMode,\n\t\t\t\t\tret = renderToString(child, context, opts, true, childSvgMode, selectValue);\n\n\t\t\t\tif (pretty && !hasLarge && isLargeString(ret)) hasLarge = true;\n\n\t\t\t\t// Skip if we received an empty string\n\t\t\t\tif (ret) {\n\t\t\t\t\tif (pretty) {\n\t\t\t\t\t\tlet isText = ret.length > 0 && ret[0]!='<';\n\n\t\t\t\t\t\t// We merge adjacent text nodes, otherwise each piece would be printed\n\t\t\t\t\t\t// on a new line.\n\t\t\t\t\t\tif (lastWasText && isText) {\n\t\t\t\t\t\t\tpieces[pieces.length -1] += ret;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tpieces.push(ret);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlastWasText = isText;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tpieces.push(ret);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (pretty && hasLarge) {\n\t\t\tfor (let i=pieces.length; i--; ) {\n\t\t\t\tpieces[i] = '\\n' + indentChar + indent(pieces[i], indentChar);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (pieces.length) {\n\t\ts += pieces.join('');\n\t}\n\telse if (opts && opts.xml) {\n\t\treturn s.substring(0, s.length-1) + ' />';\n\t}\n\n\tif (!isVoid) {\n\t\tif (pretty && ~s.indexOf('\\n')) s += '\\n';\n\t\ts += `</${nodeName}>`;\n\t}\n\n\treturn s;\n}\n\nfunction getComponentName(component) {\n\treturn component.displayName || component!==Function && component.name || getFallbackComponentName(component);\n}\n\nfunction getFallbackComponentName(component) {\n\tlet str = Function.prototype.toString.call(component),\n\t\tname = (str.match(/^\\s*function\\s+([^( ]+)/) || '')[1];\n\tif (!name) {\n\t\t// search for an existing indexed name for the given component:\n\t\tlet index = -1;\n\t\tfor (let i=UNNAMED.length; i--; ) {\n\t\t\tif (UNNAMED[i]===component) {\n\t\t\t\tindex = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t// not found, create a new indexed name:\n\t\tif (index<0) {\n\t\t\tindex = UNNAMED.push(component) - 1;\n\t\t}\n\t\tname = `UnnamedComponent${index}`;\n\t}\n\treturn name;\n}\nrenderToString.shallowRender = shallowRender;\n\nexport default renderToString;\n\nexport {\n\trenderToString as render,\n\trenderToString as renderToStaticMarkup,\n\trenderToString,\n\tshallowRender\n};\n"],"names":["const","IS_NON_DIMENSIONAL","encodeEntities","s","String","replace","indent","char","isLargeString","length","ignoreLines","indexOf","JS_TO_CSS","styleObjToCss","let","str","prop","val","toLowerCase","test","undefined","assign","obj","props","i","getChildren","accumulator","children","Array","isArray","reduce","push","SHALLOW","shallow","UNNAMED","VOID_ELEMENTS","noop","renderToString","render","shallowRender","vnode","context","opts","inner","isSvgMode","selectValue","createElement","Fragment","nodeName","type","isComponent","component","pretty","indentChar","renderRootComponent","rendered","shallowHighOrder","c","__c","__v","setState","forceUpdate","__h","options","__r","prototype","cxType","contextType","provider","cctx","value","__","_dirty","__d","state","_nextState","__s","getDerivedStateFromProps","componentWillMount","call","getChildContext","displayName","Function","name","toString","match","index","getFallbackComponentName","propChildren","html","attrs","Object","keys","sortAttributes","sort","v","allAttributes","class","for","hooked","attributeHook","__html","xml","sub","Error","isVoid","voidElements","pieces","hasLarge","lastWasText","child","ret","isText","join","substring"],"mappings":"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"}